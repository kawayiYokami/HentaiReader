<!-- æ¼«ç”»æµè§ˆé¡µé¢ -->
<div class="manga-browser">
    <!-- æœç´¢å’Œè¿‡æ»¤ -->
    <el-card>
        <div class="manga-filters">
            <!-- é¡¶éƒ¨æ“ä½œæ  -->
            <div class="filter-header">
                <!-- æœç´¢æ¡† -->
                <el-input
                    v-model="searchQuery"
                    placeholder="æœç´¢æ¼«ç”»æ ‡é¢˜..."
                    prefix-icon="Search"
                    clearable
                    style="flex: 1; margin-right: 16px;">
                </el-input>

                <!-- Webç‰ˆæœ¬ä¸æ”¯æŒæ–‡ä»¶é€‰æ‹©ï¼Œæ·»åŠ æ¼«ç”»åŠŸèƒ½ä»…åœ¨Electronç‰ˆæœ¬ä¸­å¯ç”¨ -->
                <el-tooltip content="Webç‰ˆæœ¬ä¸æ”¯æŒæ·»åŠ æ¼«ç”»åŠŸèƒ½ï¼Œè¯·ä½¿ç”¨Electronç‰ˆæœ¬" placement="bottom">
                    <el-button type="primary" disabled>
                        ğŸŒ Webç‰ˆæœ¬ (åªè¯»æ¨¡å¼)
                    </el-button>
                </el-tooltip>

                <!-- æ¸…é™¤è¿‡æ»¤æŒ‰é’® -->
                <el-button
                    v-if="selectedTags.length > 0"
                    size="default"
                    type="info"
                    text
                    @click="clearTagFilters"
                    style="margin-left: 8px;">
                    æ¸…é™¤ (<span v-text="selectedTags.length"></span>)
                </el-button>
            </div>

            <!-- æ ‡ç­¾åˆ†ç±»è¿‡æ»¤ -->
            <div v-if="Object.keys(tagsByCategory).length > 0" class="tag-category-filters">
                <!-- æ ‡ç­¾åˆ†ç±»é€‰æ‹©å™¨ -->
                <el-tabs v-model="activeTagCategory" type="card" class="tag-category-tabs">
                    <el-tab-pane
                        v-for="(tags, category) in tagsByCategory"
                        :key="category"
                        :label="`${category} (${tags.length})`"
                        :name="category">

                        <div class="tag-list">
                            <el-tag
                                v-for="tag in tags.slice(0, tagCategoryShowAll[category] ? tags.length : 20)"
                                :key="tag.full"
                                :type="selectedTags.includes(tag.full) ? 'primary' : undefined"
                                :effect="selectedTags.includes(tag.full) ? 'dark' : 'plain'"
                                @click="toggleTag(tag.full)"
                                class="filter-tag">
                                <span v-text="tag.display"></span>
                            </el-tag>

                            <!-- æ˜¾ç¤ºæ›´å¤šæŒ‰é’® -->
                            <el-button
                                v-if="tags.length > 20"
                                size="small"
                                type="info"
                                text
                                @click="toggleShowAllTags(category)"
                                class="show-more-btn">
                                <span v-text="tagCategoryShowAll[category] ? 'æ”¶èµ·' : `æ˜¾ç¤ºå…¨éƒ¨ ${tags.length} ä¸ª`"></span>
                            </el-button>
                        </div>
                    </el-tab-pane>
                </el-tabs>
            </div>
        </div>
    </el-card>

    <!-- ç©ºçŠ¶æ€ -->
    {% include 'components/shared/empty-state.html' %}

    <!-- åŠ è½½çŠ¶æ€ -->
    {% include 'components/shared/loading-state.html' %}

    <!-- æ¼«ç”»åˆ—è¡¨ -->
    <div v-else-if="filteredMangaList.length > 0" class="manga-grid">
        {% include 'components/widgets/manga-card.html' %}
    </div>

    <!-- æ— ç»“æœçŠ¶æ€ -->
    {% include 'components/shared/no-results-state.html' %}
</div>

<!-- Êº´ÁîªÂç°ÁâáÁªÑ‰ª∂ -->
<div v-for="manga in filteredMangaList"
     :key="manga.file_path"
     :data-manga-path="manga.file_path"
     class="manga-card"
     @click="selectManga(manga)"
     :ref="el => { if (el) observeCard(el) }">

    <!-- Â∞ÅÈù¢ÂõæÁâá -->
    <div class="manga-cover">
        <!-- Áº©Áï•ÂõæÔºà‰ªéÁºìÂ≠òÂä†ËΩΩÔºâ -->
        <img v-if="getThumbnailUrl(manga.file_path)"
             :src="getThumbnailUrl(manga.file_path)"
             :alt="getTitleTag(manga.tags) || 'Êº´ÁîªÂ∞ÅÈù¢'"
             class="cover-image">

        <!-- Âä†ËΩΩ‰∏≠Áä∂ÊÄÅ -->
        <div v-else-if="isThumbnailLoading(manga.file_path)" class="cover-loading">
            <div class="loading-spinner">‚è≥</div>
            <div class="loading-text">Âä†ËΩΩ‰∏≠...</div>
        </div>

        <!-- Êó†ÂõæÁâáÂç†‰ΩçÁ¨¶ -->
        <div v-else class="cover-placeholder">
            <div class="placeholder-icon">
                <span v-if="manga.file_type === 'folder'">üìÅ</span>
                <span v-else-if="manga.file_type === 'zip'">üì¶</span>
                <span v-else>üìÑ</span>
            </div>
        </div>

        <!-- È°µÊï∞ËßíÊ†á -->
        <div class="page-count" v-text="manga.total_pages"></div>
    </div>

    <!-- Ê†áÈ¢òÊ†áÁ≠æÔºàÈªòËÆ§ÊòæÁ§∫Ôºâ -->
    <div class="manga-title clickable-title"
         v-if="getTitleTag(manga.tags)"
         @click.stop="onTitleClick(getTitleTag(manga.tags))"
         :title="`ÁÇπÂáªÊêúÁ¥¢: ${getTitleTag(manga.tags)}`">
        <span v-text="getTitleTag(manga.tags)"></span>
    </div>

    <!-- ÂÖ∂‰ªñÊ†áÁ≠æÔºàÊÇ¨ÂÅúÊòæÁ§∫Ôºâ -->
    <div class="manga-tags" v-if="getOtherTags(manga.tags).length > 0">
        <div class="tag clickable-tag"
             v-for="tag in getOtherTags(manga.tags).slice(0, 3)"
             :key="tag"
             @click.stop="onTagClick(tag)"
             :title="`ÁÇπÂáªÊêúÁ¥¢: ${tag}`">
            <span v-text="tag"></span>
        </div>
        <div class="tag more-tag clickable-tag"
             v-if="getOtherTags(manga.tags).length > 3"
             @click.stop="showAllTags(manga)"
             title="ÁÇπÂáªÊü•ÁúãÊâÄÊúâÊ†áÁ≠æ">
            +<span v-text="getOtherTags(manga.tags).length - 3"></span>
        </div>
    </div>
</div>

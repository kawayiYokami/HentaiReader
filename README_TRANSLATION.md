# OCR翻译功能使用说明

## 功能概述

本项目的OCR测试窗口现已集成翻译功能，支持多种翻译服务，默认使用智谱AI的GLM-4-Flash-250414模型进行翻译。

## 主要特性

- ✅ 支持多种翻译服务：智谱AI、Google翻译、DeepL、百度翻译、MyMemory
- ✅ 默认使用GLM-4-Flash-250414模型
- ✅ 翻译结果缓存，避免重复翻译
- ✅ 图形化设置界面
- ✅ 一键测试翻译连接
- ✅ OCR识别后可直接翻译
- ✅ 支持保存翻译结果

## 使用方法

### 1. 启动OCR测试窗口

```bash
python ocr_test_window.py
```

### 2. 配置翻译设置

1. 点击界面上的 **⚙️ 翻译设置** 按钮
2. 选择翻译器类型（推荐选择"智谱"）
3. 输入相应的API密钥或配置信息
4. 选择模型（智谱AI默认使用GLM-4-Flash-250414）
5. 点击 **测试连接** 验证配置
6. 点击 **保存** 保存设置

### 3. 使用翻译功能

1. 点击 **📁 打开图片** 选择要识别的图片
2. 点击 **🔍 开始OCR** 进行文字识别
3. 识别完成后，点击 **🌐 翻译** 进行翻译
4. 翻译结果将显示在"翻译结果"区域
5. 可以点击 **💾 保存结果** 保存OCR和翻译结果

## 支持的翻译服务

### 1. 智谱AI（推荐）
- **模型选项**：
  - `glm-4-flash-250414`（默认，推荐）
  - `glm-4-flash`
  - `glm-4`
  - `glm-3-turbo`
- **配置要求**：需要智谱AI API密钥
- **优势**：翻译质量高，支持多种语言，响应速度快

### 2. Google翻译
- **配置要求**：可选API密钥（免费版本有限制）
- **优势**：支持语言最多，免费版本可用

### 3. DeepL
- **配置要求**：需要DeepL API密钥
- **优势**：翻译质量极高，特别适合欧洲语言

### 4. 百度翻译
- **配置要求**：需要百度翻译APP ID和APP Key
- **优势**：对中文支持较好

### 5. MyMemory
- **配置要求**：可选邮箱（提供邮箱可增加免费额度）
- **优势**：完全免费使用

## 配置文件

翻译设置保存在 `config/config.json` 文件中，主要配置项：

```json
{
    "Translation": {
        "TranslatorType": "智谱",
        "ZhipuApiKey": "your-api-key",
        "ZhipuModel": "glm-4-flash-250414",
        "GoogleApiKey": "",
        "DeepLApiKey": "",
        "BaiduAppId": "",
        "BaiduAppKey": "",
        "MyMemoryEmail": ""
    }
}
```

## 翻译缓存

- 翻译结果会自动缓存到 `app/config/translation_cache.json`
- 相同文本的翻译会直接从缓存读取，提高效率
- 缓存格式：`"原文::目标语言": "翻译结果"`

## 注意事项

1. **API密钥安全**：请妥善保管您的API密钥，不要分享给他人
2. **网络连接**：翻译功能需要网络连接
3. **API限制**：各翻译服务都有使用限制，请注意配额
4. **语言检测**：系统会自动检测源语言，目标语言默认为中文

## 故障排除

### 翻译失败
1. 检查网络连接
2. 验证API密钥是否正确
3. 确认API服务是否正常
4. 检查是否超出API使用限制

### 设置不生效
1. 确保点击了"保存"按钮
2. 重新启动应用程序
3. 检查配置文件权限

### 翻译质量问题
1. 尝试不同的翻译服务
2. 对于智谱AI，可以尝试不同的模型
3. 确保OCR识别结果准确

## 开发信息

- **翻译模块**：`core/translator.py`
- **配置模块**：`core/config.py`
- **设置界面**：`translation_settings_window.py`
- **主界面**：`ocr_test_window.py`

## 更新日志

### v1.0.0
- ✅ 集成翻译功能到OCR测试窗口
- ✅ 支持智谱AI GLM-4-Flash-250414模型
- ✅ 添加图形化设置界面
- ✅ 实现翻译结果缓存
- ✅ 支持多种翻译服务
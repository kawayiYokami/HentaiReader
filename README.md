# Manga Translator

ç°ä»£åŒ–æ¼«ç”»ç¿»è¯‘å·¥å…·ï¼Œé›†æˆ OCR è¯†åˆ«ã€å¤šå¼•æ“ç¿»è¯‘å’Œæ–‡æœ¬æ›¿æ¢åŠŸèƒ½ï¼Œæä¾›é«˜æ•ˆçš„æ¼«ç”»æœ¬åœ°åŒ–è§£å†³æ–¹æ¡ˆã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **OCR æ–‡æœ¬è¯†åˆ«**ï¼šç²¾å‡†è¯†åˆ«æ¼«ç”»ä¸­çš„æ–‡æœ¬åŒºåŸŸï¼Œæ”¯æŒå¤šè¯­è¨€å­—ç¬¦é›†
- **å¤šå¼•æ“ç¿»è¯‘**ï¼šé›†æˆæ™ºè°±AIã€Googleç¿»è¯‘å¼•æ“ï¼Œæ”¯æŒè‡ªå®šä¹‰APIå’Œæ‰¹é‡å¤„ç†
- **æ‰¹é‡å¤„ç†**ï¼šå…¨è‡ªåŠ¨æ‰¹é‡ç¿»è¯‘æ•´ä¸ªæ¼«ç”»ç« èŠ‚
- **å­—ä½“ä¿æŒ**ï¼šå†…ç½® 12+ ç²¾é€‰å­—ä½“åº“ï¼Œç¡®ä¿ç¿»è¯‘æ–‡æœ¬é£æ ¼ç»Ÿä¸€
- **æ–‡æœ¬æ›¿æ¢ç³»ç»Ÿ**ï¼šæ™ºèƒ½å¤„ç†æ°”æ³¡æ–‡æœ¬å¸ƒå±€ï¼Œä¿æŒåŸå§‹æ¼«ç”»ç¾å­¦
- **ç›´è§‚ç•Œé¢**ï¼šåŸºäº PySide6 å’Œ qfluentwidgets æ„å»ºçš„æ“ä½œç•Œé¢

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“¦ å®‰è£…

1. **å…‹éš†ä»“åº“**:
   ```bash
   git clone https://github.com/your-username/manga.git
   cd manga
   ```

2. **å®‰è£…ä¾èµ–**:
   ```bash
   pip install uv
   uv venv
   uv pip install -r requirements.txt
   ```

3. **åˆå§‹åŒ–å­é¡¹ç›® (OCR å¼•æ“)**:
   ```bash
   update_ocr_font.bat
   ```
   > æ­¤è„šæœ¬ä¼šè‡ªåŠ¨å…‹éš† [OnnxOCR](https://github.com/jingsongliujing/OnnxOCR) å­é¡¹ç›®

### ğŸƒ è¿è¡Œ

å¯åŠ¨åº”ç”¨ç¨‹åºï¼š
```bash
python main.py
```

### ä½¿ç”¨æŒ‡å—
1. ä¸»ç•Œé¢é€‰æ‹©æ¼«ç”»æ–‡ä»¶/ç›®å½•
2. åœ¨ OCR ç¿»è¯‘çª—å£ï¼ˆ`Ctrl+T`ï¼‰é…ç½®ï¼š
   - é€‰æ‹©æºè¯­è¨€/ç›®æ ‡è¯­è¨€
   - è®¾ç½®ç¿»è¯‘å¼•æ“å’Œ API å¯†é’¥
   - è°ƒæ•´æ–‡æœ¬æ£€æµ‹å‚æ•°
3. ç‚¹å‡»"å¼€å§‹ç¿»è¯‘"è¿›è¡Œå•é¡µå¤„ç†
4. ä½¿ç”¨æ‰¹å¤„ç†å·¥ä½œå™¨è¿›è¡Œå…¨é›†ç¿»è¯‘

## ğŸ› ï¸ é¡¹ç›®ç»“æ„

```
manga/
â”œâ”€â”€ main.py                    # åº”ç”¨å…¥å£
â”œâ”€â”€ pyproject.toml             # é¡¹ç›®é…ç½®
â”œâ”€â”€ README.md                  # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ update_ocr_font.bat        # å­—ä½“æ›´æ–°è„šæœ¬
â”œâ”€â”€ uv.toml                    # uv é…ç½®
â”œâ”€â”€ core/                      # æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ batch_translation_worker.py  # æ‰¹é‡ç¿»è¯‘å·¥ä½œå™¨
â”‚   â”œâ”€â”€ config.py              # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ image_translator.py    # å›¾åƒç¿»è¯‘å™¨
â”‚   â”œâ”€â”€ manga_cache.py         # æ¼«ç”»ç¼“å­˜
â”‚   â”œâ”€â”€ manga_manager.py       # æ¼«ç”»ç®¡ç†
â”‚   â”œâ”€â”€ manga_model.py         # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ manga_text_replacer.py # æ–‡æœ¬æ›¿æ¢å¼•æ“
â”‚   â”œâ”€â”€ ocr_manager.py         # OCR ç®¡ç†å™¨
â”‚   â””â”€â”€ translator.py          # ç¿»è¯‘å™¨
â”œâ”€â”€ font/                      # å­—ä½“åº“ï¼ˆ12+ ç²¾é€‰å­—ä½“ï¼‰
â”‚   â”œâ”€â”€ æ¨ä»»ä¸œç«¹çŸ³ä½“-Heavy.ttf
â”‚   â”œâ”€â”€ Alibaba-PuHuiTi-Bold.ttf
â”‚   â””â”€â”€ ...ï¼ˆå…¶ä»–å­—ä½“æ–‡ä»¶ï¼‰
â”œâ”€â”€ OnnxOCR/                   # OCR å­é¡¹ç›® [MIT]
â”‚   â””â”€â”€ ...ï¼ˆOCR å¼•æ“å®ç°ï¼‰
â”œâ”€â”€ ui/                        # ç”¨æˆ·ç•Œé¢
â”‚   â”œâ”€â”€ new_interface/         # ä¸»ç•Œé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ control_panel.py   # æ§åˆ¶é¢æ¿
â”‚   â”‚   â”œâ”€â”€ manga_browser.py   # æ¼«ç”»æµè§ˆå™¨
â”‚   â”‚   â”œâ”€â”€ manga_list.py      # æ¼«ç”»åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ manga_viewer.py    # æ¼«ç”»æŸ¥çœ‹å™¨
â”‚   â”‚   â””â”€â”€ tag_filter.py      # æ ‡ç­¾è¿‡æ»¤å™¨
â”‚   â””â”€â”€ ocr_translation/       # OCR ç¿»è¯‘ç•Œé¢
â”‚       â”œâ”€â”€ ocr_translation_window.py     # ä¸»çª—å£
â”‚       â””â”€â”€ translation_settings_window.py # è®¾ç½®çª—å£
â”œâ”€â”€ utils/                     # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ color_utils.py         # é¢œè‰²å¤„ç†
â”‚   â””â”€â”€ manga_logger.py        # æ—¥å¿—ç³»ç»Ÿ
â””â”€â”€ views/                     # è§†å›¾æ¥å£
    â”œâ”€â”€ manga_browser_interface.py
    â”œâ”€â”€ manga_translation_interface.py
    â””â”€â”€ settings_interface.py
```

## âš™ï¸ é…ç½®

å…³é”®é…ç½®æ–‡ä»¶ï¼š

1. **ç¿»è¯‘è®¾ç½®** [`ui/ocr_translation/translation_settings_window.py`]ï¼š
   - è®¾ç½®é»˜è®¤ç¿»è¯‘å¼•æ“ (ChatGPT/DeepL)
   - é…ç½® API å¯†é’¥å’Œç«¯ç‚¹
   - è°ƒæ•´ç¿»è¯‘å‚æ•°ï¼ˆæ¸©åº¦ã€æœ€å¤§ token ç­‰ï¼‰

2. **OCR é…ç½®** [`core/ocr_manager.py`]ï¼š
   - æ–‡æœ¬æ£€æµ‹ç½®ä¿¡åº¦é˜ˆå€¼
   - æ–‡æœ¬åŒºåŸŸåˆå¹¶å‚æ•°
   - è¯­è¨€è¯†åˆ«æ¨¡å‹é€‰æ‹©

3. **å­—ä½“è®¾ç½®** [`core/manga_text_replacer.py`]ï¼š
   - é»˜è®¤æ›¿æ¢å­—ä½“ï¼ˆä» `font/` ç›®å½•é€‰æ‹©ï¼‰
   - å­—ä½“å¤§å°è‡ªé€‚åº”è§„åˆ™
   - æ–‡æœ¬æè¾¹å’Œé˜´å½±é…ç½®

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æµç¨‹ï¼š
1. æäº¤ issue æè¿°é—®é¢˜/å»ºè®®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`feat/your-feature`)
3. æäº¤ PR å¹¶å…³è”å¯¹åº” issue
4. ç¡®ä¿é€šè¿‡æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•ï¼š
   ```bash
   python -m core.test.test_manga_batch_translate
   ```

## ğŸ“„ è®¸å¯è¯

- ä¸»é¡¹ç›®: [MIT License](LICENSE)
- OnnxOCR å­é¡¹ç›®: [MIT License](https://github.com/jingsongliujing/OnnxOCR/blob/main/LICENSE)